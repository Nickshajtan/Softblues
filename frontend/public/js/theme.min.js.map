{"version":3,"names":[],"mappings":"","sources":["theme.min.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function() {\r\n  try {\r\n    document.querySelectorAll('.modal-form form').forEach( element => element.addEventListener('submit', function(e) {\r\n      e.preventDefault();\r\n      const box     = this.querySelector('.message-text');\r\n      let message   = function( value ) {\r\n        if( !value ) return;\r\n        box.innerText = value;\r\n      }\r\n      let data      = new FormData(this);\r\n      let xhr       = new XMLHttpRequest();\r\n      xhr.open('POST', 'http://example.com', true);\r\n      xhr.send(data);\r\n      xhr.ontimeout = () => {\r\n        let text = 'Извините, запрос превысил максимальное время. ' + xhr.status + ': ' + xhr.responseText;\r\n        if( isset( text ) ) {\r\n          message( text );\r\n        }\r\n      };\r\n      xhr.onerror = () => {\r\n        let text = 'Ошибка! ' + xhr.status + ': ' + xhr.responseText;\r\n        if( isset( text ) ) {\r\n          message( text );\r\n        }\r\n      };\r\n      xhr.onreadystatechange = () => {\r\n        let text;\r\n        if (xhr.status != 200) {\r\n          text = 'Статус отправки ' + xhr.status + ': ' + xhr.statusText;\r\n        }\r\n        else {\r\n          text = 'Статус отправки ' + xhr.status + ': ' + xhr.responseText;\r\n        }\r\n        if( isset( text ) ) {\r\n          message( text );\r\n        }\r\n      };\r\n      xhr.onload = () => {\r\n        let text = 'Сообщение успешно отправлено.';\r\n        if( isset( text ) ) {\r\n          message( text );\r\n        }\r\n        this.querySelectorAll('input').forEach(\r\n          element => function() { element.value = \"\"; }\r\n        );\r\n        this.querySelectorAll('textarea').forEach(\r\n          element => function() { element.innerText = \"\"; }\r\n        );\r\n      };\r\n    }));\r\n  }\r\n  catch(e){\r\n    console.log('Form sendler error: ' + e);\r\n  }\r\n});\n'use strict';\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n  const globals = {\r\n    'BODY'   : document.querySelector('body'),\r\n    'OVERLAY': document.querySelector('.overlay'),\r\n    'NAV'    : document.querySelector('.site-header__nav__menu'),\r\n  };\r\n  \r\n  MobileBurgerMenu( globals );\r\n  ModalLinks( globals );\r\n});\r\n\r\nfunction MobileBurgerMenu( args = {} ) {\r\n  try {\r\n      document.querySelector('.site-header__burger-switcher').onclick = function() {        \r\n        this.classList.toggle('is-active');\r\n        \r\n        if( isset( args.NAV ) ) {\r\n          args.NAV.classList.toggle('is-active');\r\n        }\r\n        \r\n        if( isset( args.BODY ) ) {\r\n          args.BODY.classList.toggle('noscroll');\r\n        }\r\n        \r\n        if( isset( args.OVERLAY ) ) {\r\n          OverlaySet( args );\r\n        }\r\n      }\r\n  }\r\n  catch(e) {\r\n    console.log('Burger menu script error: ' + e);\r\n  }\r\n}\r\n\r\nfunction OverlaySet( args = {} ) {\r\n  try {\r\n    if( !isset( args.OVERLAY ) ) {\r\n      throw new Error('Overlay not found: ' + e);\r\n      return false;\r\n    }\r\n    \r\n    let OVERLAY = args.OVERLAY;\r\n    OVERLAY.classList.toggle('is-active');\r\n    \r\n    OVERLAY.onclick = () => {\r\n      document.querySelector('.site-header__burger-switcher').classList.remove('is-active');\r\n      OVERLAY.classList.remove('is-active');\r\n      args.BODY.classList.remove('is-active');\r\n      args.BODY.classList.remove('noscroll');\r\n      args.NAV.classList.remove('is-active');\r\n      \r\n      document.querySelectorAll('.modal-form').forEach(function( element ) {\r\n        element.classList.remove('is-active');\r\n      });\r\n    }\r\n    \r\n  }\r\n  catch(e) {\r\n    console.log('Error with overlay function: ' + e );\r\n  }\r\n}\r\n\r\nfunction ModalLinks( args = {} ) {\r\n  try {\r\n    const modaLinks = document.querySelectorAll('.modal-caller');\r\n    \r\n    if( modaLinks.length == 0 ) {\r\n      throw new Error('Modal links not found: ' + e);\r\n      return false;\r\n    }\r\n    \r\n    modaLinks.forEach(function( element ) {\r\n      element.onclick = function(e) {\r\n        e.preventDefault();\r\n        ModalForm( args );\r\n      }\r\n    });\r\n  }\r\n  catch(e) {\r\n    console.log(e);\r\n  }\r\n}\r\n\r\nfunction ModalForm( args = {} ) {\r\n  try {\r\n    const modalForms = document.querySelectorAll('.modal-form');\r\n    let BODY         = args.BODY;\r\n    if( modalForms.length == 0 ) {\r\n      throw new Error('Modal forms not found: ' + e);\r\n      return false;\r\n    }\r\n    \r\n    modalForms.forEach(function( element ) {\r\n      element.classList.toggle('is-active');\r\n      BODY.classList.toggle('noscroll');\r\n      \r\n      element.remove = () => {\r\n        element.classList.remove('is-active');\r\n        BODY.classList.remove('noscroll');\r\n      };\r\n      \r\n      element.querySelector('.modal-closer').onclick = () => {\r\n        element.remove();\r\n      };\r\n      \r\n      document.addEventListener('keydown', function(e){\r\n        if(e.which == 27) {\r\n          element.remove();\r\n        }\r\n      });\r\n      \r\n      element.onclick = function(e) {\r\n        if( e.target.nodeName !== 'DIV' ) {\r\n          return;\r\n        }\r\n        let container = element.querySelector(\".modal-form__modal-body\");\r\n        if ( container.classList[0] !== e.target.classList[0] && container.querySelector('.' + e.target.classList[0]) === null ){\r\n          element.remove();\r\n        }\r\n      }\r\n      \r\n    });\r\n  }\r\n  catch(e){\r\n    console.log(e);\r\n  }\r\n}\r\n"],"file":"theme.min.js"}