{"version":3,"names":[],"mappings":"","sources":["theme.min.js"],"sourcesContent":["'use strict';\r\n\r\nconst BODY = document.querySelector('body');\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n  modalLinks();\r\n  \r\n  let nav     = document.querySelector('.site-header__nav__menu');\r\n  let burger  = document.querySelector('.site-header__burger-switcher');\r\n  burger.onclick = function(){\r\n    burger.classList.toggle('is-active');\r\n    document.querySelector('.overlay').classList.toggle('is-active');\r\n    nav.classList.toggle('is-active');\r\n  };\r\n  \r\n  document.querySelector('.overlay').onclick = function(){\r\n    nav.classList.remove('is-active');\r\n    burger.classList.remove('is-active');\r\n    this.classList.remove('is-active');\r\n  };\r\n  \r\n  const forms = document.querySelectorAll('.modal-form form');\r\n  for (let el of forms) {\r\n    const message = el.querySelector('.message-text');\r\n    el.addEventListener('submit', function(e){\r\n      e.preventDefault();\r\n      let data = new FormData(el);\r\n      let xhr  = new XMLHttpRequest();\r\n      xhr.open('POST', 'http://example.com', true);\r\n      xhr.send(data);\r\n      xhr.ontimeout = function() {\r\n          message.innerText = 'Статус отправки ' + xhr.status + ': ' + xhr.statusText;\r\n      }\r\n      xhr.onreadystatechange = function() {\r\n        if (xhr.status != 200) {\r\n          message.innerText = 'Статус отправки ' + xhr.status + ': ' + xhr.statusText;\r\n        } \r\n        else {\r\n          message.innerText = 'Статус отправки ' + xhr.status + ': ' + xhr.responseText;\r\n        }\r\n      }\r\n      xhr.onerror = function() {\r\n        message.innerText = 'Ошибка! ' + xhr.status + ': ' + xhr.responseText;\r\n      }\r\n      xhr.ontimeout = function() {\r\n        message.innerText = 'Извините, запрос превысил максимальное время. ' + xhr.status + ': ' + xhr.responseText;\r\n      }\r\n      xhr.onload = function() {\r\n        message.innerText = 'Сообщение успешно отправлено.';\r\n        let inputs = el.querySelectorAll('input');\r\n        for (let el of inputs) {\r\n          el.value = \"\";\r\n        }\r\n        let textareas = el.querySelectorAll('textarea');\r\n        for (let el of textareas) {\r\n          el.innerText = \"\";\r\n        }\r\n      }\r\n    });\r\n  }\r\n});\r\n\r\nfunction  modalLinks() {\r\n  try {\r\n    const modaLinks = document.querySelectorAll('.modal-caller');\r\n    \r\n    if( modaLinks.length == 0 ) {\r\n      throw new Error('Modal links not found: ' + e);\r\n      return false;\r\n    }\r\n    \r\n    for (let el of modaLinks) {\r\n      el.onclick = function(e) {\r\n        e.preventDefault();\r\n        modalForm();\r\n      }\r\n    }\r\n    \r\n  }\r\n  catch(e) {\r\n    console.log(e);\r\n  }\r\n}\r\n\r\nfunction modalForm() {\r\n  try {\r\n    const modalForms = document.querySelectorAll('.modal-form');\r\n    if( modalForms.length == 0 ) {\r\n      throw new Error('Modal forms not found: ' + e);\r\n      return false;\r\n    }\r\n    for (let el of modalForms) {\r\n      (function(){\r\n        \r\n      })();\r\n      el.classList.toggle('is-active');\r\n      BODY.classList.toggle('noscroll');\r\n      el.querySelector('.modal-closer').onclick = () => {\r\n        el.classList.remove('is-active');\r\n        BODY.classList.remove('noscroll');\r\n      };\r\n      document.addEventListener('keydown', function(eventObject){\r\n                if (eventObject.which == 27){ \r\n                  el.classList.remove('is-active');\r\n                  BODY.classList.remove('noscroll');\r\n                }\r\n      });\r\n      el.onclick = function (e) {\r\n          \r\n          if( e.target.nodeName !== 'DIV' ) {\r\n            return;\r\n          }\r\n          let container = el.querySelector(\".modal-form__modal-body\");\r\n          if ( container.classList[0] !== e.target.classList[0] && container.querySelector('.' + e.target.classList[0]) === null ){\r\n              el.classList.remove('is-active');\r\n              BODY.classList.remove('noscroll');\r\n          }\r\n      };\r\n    }\r\n  }\r\n  catch(e){\r\n    console.log(e);\r\n  }\r\n}\r\n"],"file":"theme.min.js"}